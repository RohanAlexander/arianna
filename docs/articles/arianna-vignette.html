<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>aRianna Vignette • aRianna</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="aRianna Vignette">
<meta property="og:description" content="aRianna">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">aRianna</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/arianna-vignette.html">aRianna Vignette</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="arianna-vignette_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="arianna-vignette_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="arianna-vignette_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>aRianna Vignette</h1>
            
      
      
      <div class="hidden name"><code>arianna-vignette.Rmd</code></div>

    </div>

    
    
<div id="introduction-to-arianna" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction-to-arianna" class="anchor"></a>Introduction to aRianna</h1>
<p>Alphabets Really In Absolute Need of New Alphabet-ing or <code>aRianna</code> is a package that helps identify potential issues in text datasets by comparing the actual text with that expected by various natural language models. The package also provides a ‘consistency score’ that can be used to monitor how the text dataset changes during the cleaning and preparation process.</p>
<div id="using-the-package" class="section level2">
<h2 class="hasAnchor">
<a href="#using-the-package" class="anchor"></a>Using the package</h2>
<p>Raw text data are often messy and unready for further analysis. The <code>aRianna</code> package provides an easy way to clean your text data by picking up text errors in the dataset and replace them with <code>aRianna</code>’s predictions. Additionally, <code>aRianna</code> introduces the notion of a consistency score, which refers to the proportion of text that is unchanged by the model. This is used to monitor changes during the cleaning process, and to compare the messiness of different texts. There are two types of consistency scores: the internal consistency score and the external consistency score. We define internal consistency as when the model is trained on the corpus itself, and external consistency as when the model is trained on a more general corpus. In <code>aRianna</code>, the general corpus trained for external consistency score generation is a subset of Open WebText by <span class="citation">@Gokaslan2019OpenWeb</span>: <a href="https://skylion007.github.io/OpenWebTextCorpus/" class="uri">https://skylion007.github.io/OpenWebTextCorpus/</a>. Together, these concepts provide a guide to the cleanliness and consistency of a text dataset. This can be important when deciding whether a dataset is fit for purpose; when carrying out data cleaning and preparation tasks; and as a comparison between datasets.</p>
<div id="getting-started" class="section level3">
<h3 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting started</h3>
<p>To install the package and load the library:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"RohanAlexander/arianna"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">aRianna</span>)</pre></body></html></div>
<p>For demonstration, we use the first paragraph of Jane Eyre as the internal text data. A sentence within the paragraph is modified with the intention to contain an error and serves as the text to be evaluated:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">body_of_text</span> <span class="kw">&lt;-</span> <span class="st">"There was no possibility of taking a walk that day. 
We had been wandering, indeed, in the leafless shrubbery an hour in 
the morning; but since dinner (Mrs. Reed, when there was no company, 
dined early) the cold winter wind had brought with it clouds so sombre, 
and a rain so penetrating, that further out-door exercise was now out 
of the question."</span>

<span class="no">text_to_evaluate</span> <span class="kw">&lt;-</span> <span class="st">"when there was na company"</span></pre></body></html></div>
<p>The first step is to turn the body of text into the internal consistency dataset. The generated internal consistency dataset is a tibble that contains the 5-grams, 4-grams and tri-grams that appear in the internal text data more than once. Since only <code>there_was_no</code> has more than one occurrence, it is the only reference n-gram in the internal consistency dataset:</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">internal_consistency_dataset</span> <span class="kw">&lt;-</span>
  <span class="kw pkg">aRianna</span><span class="kw ns">::</span><span class="fu"><a href="../reference/make_internal_consistency_dataset.html">make_internal_consistency_dataset</a></span>(<span class="no">body_of_text</span>)
<span class="no">internal_consistency_dataset</span>
<span class="co">## # A tibble: 1 x 3</span>
<span class="co">##   tokens       first_words last_word_expected</span>
<span class="co">##   &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;             </span>
<span class="co">## 1 there_was_no there_was   no                </span></pre></body></html></div>
<p>The next step is to compare the text to be evaluated with the internal consistency dataset that we created in the previous step. The function <code>generate_internal_consistency_score</code> takes in two arguments — the text to evaluate and the internal consistency dataset. The function identifies the word “na” as an unexpected word, and generates the internal consistency score as zero. The function also lists “no” as the replacement of “na”:</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="kw pkg">aRianna</span><span class="kw ns">::</span><span class="fu"><a href="../reference/generate_internal_consistency_score.html">generate_internal_consistency_score</a></span>(
  <span class="no">text_to_evaluate</span>, <span class="no">internal_consistency_dataset</span>)

<span class="co">## $`internal consistency`</span>
<span class="co">## # A tibble: 1 x 3</span>
<span class="co">##   as_expected     n consistency</span>
<span class="co">##   &lt;lgl&gt;       &lt;int&gt;       &lt;dbl&gt;</span>
<span class="co">## 1 FALSE           1           0</span>

<span class="co">## $`unexpected words`</span>
<span class="co">## # A tibble: 1 x 3</span>
<span class="co">##   first_words last_word last_word_expected </span>
<span class="co">##   &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;                 </span>
<span class="co">## 1 there_was   na        no                 </span></pre></body></html></div>
<p>To get the external consistency score, we will employ the <code>generate_external_consistency_score</code> function. The function <code>generate_internal_consistency_score</code> takes in only one argument — the text to evaluate, and compares it with the external consistency dataset. Here, the text to evaluate is “there was no possibiliti”, with the word “possibility” being wrongly spelled. The function identifies the word “possibiliti” as an unexpected word, and generates the external consistency score 0.833. Because the external dataset is larger, it is capable of providing more replacement candidates for “possibiliti”. The replacements based on 4-grams are displayed first followed by the replacements based on tri-grams:</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">text_to_evaluate</span> <span class="kw">&lt;-</span> <span class="st">"there was no possibiliti"</span>
<span class="kw pkg">aRianna</span><span class="kw ns">::</span><span class="fu"><a href="../reference/generate_external_consistency_score.html">generate_external_consistency_score</a></span>(<span class="no">text_to_evaluate</span>)

<span class="co">## aRianna::generate_external_consistency_score(text_to_evaluate)</span>
<span class="co">## $`external consistency`</span>
<span class="co">## # A tibble: 1 x 3</span>
<span class="co">##   as_expected     n consistency</span>
<span class="co">##   &lt;lgl&gt;       &lt;int&gt;       &lt;dbl&gt;</span>
<span class="co">## 1 FALSE           2       0.833</span>
<span class="co">## 2 TRUE           10       0.833</span>

<span class="co">## $`unexpected words`</span>
<span class="co">## # A tibble: 11 x 3</span>
<span class="co">##    first_words  last_word    last_word_expected </span>
<span class="co">##    &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;                    </span>
<span class="co">##  1 there_was_no possibiliti  evidence          </span>
<span class="co">##  2 there_was_no possibiliti  immediate         </span>
<span class="co">##  3 there_was_no possibiliti  infrastructure    </span>
<span class="co">##  4 there_was_no possibiliti  one               </span>
<span class="co">##  5 there_was_no possibiliti  possibility       </span>
<span class="co">##  6 there_was_no possibiliti  sound             </span>
<span class="co">##  7 there_was_no possibiliti  way               </span>
<span class="co">##  8 was_no       possibiliti  good              </span>
<span class="co">##  9 was_no       possibiliti  longer            </span>
<span class="co">## 10 was_no       possibiliti  more              </span>
<span class="co">## 11 was_no       possibiliti  wonder </span></pre></body></html></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Rohan Alexander, Ke-Li Chiu.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
